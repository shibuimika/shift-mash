# SHIFT MASH（地域シフト循環）MVP

店舗間の人員不足と人員余剰をリアルタイムで相互補完するWebアプリケーション

## 🎯 概要

当日発生する「人員不足（欠勤）」と「人員余剰（想定より暇）」を、同一エリア内の複数店舗で効率的に解決するためのアプリケーションです。

### 主な価値

- **不足店**: 営業品質と売上の毀損を回避
- **余剰店**: 人件費ロス／早上がり不満を回避  
- **アルバイト**: 予定収入・勤務時間を維持、他店実績が可視化

## 🚀 技術スタック

- **フレームワーク**: React 18 + TypeScript
- **ビルドツール**: Vite
- **スタイリング**: Tailwind CSS v3
- **状態管理**: TanStack Query (React Query)
- **ルーティング**: React Router v6
- **UIコンポーネント**: Headless UI + Heroicons
- **データ**: ローカルJSON（擬似API）

## 📱 主要機能

### 1. 当日シフト表示 (`/day`)
- 店舗別のシフト一覧表示
- 不足・余剰シフトの識別（色分け）
- シフト枠上部の操作ボタン
  - **人員募集**: 不足時に他店の派遣可能人材を検索
  - **他店舗に派遣**: 余剰時に他店の募集枠を検索

### 2. 地域間調整 (`/inbox`)
- **応援をお願いする**: 自店舗の募集にマッチする他店舗の派遣可能人材一覧
- **応援する**: 自店舗の派遣可能にマッチする他店舗の募集一覧
- 動的デモデータ生成によるリアルタイムマッチング
- 承認/拒否による先着制マッチング

### 3. サマリー表示 (`/overview`)
- 全体・店舗別の不足/余剰統計
- 最近のアクティビティ履歴
- KPI指標の可視化

## 🎮 デモシナリオ

### 赤色ボタン（人員募集）の流れ
1. **09:00-12:00 ホールで欠勤** → `人員募集`ボタンを押す
2. **公開確認モーダル**で「公開する」を押す
3. **自動で/inboxページに遷移** → 赤色カード「応援をお願いする」に他店舗の派遣可能人材が表示
4. **マッチングデータ**: 同じ時間・役割の他店舗スタッフが2件表示

### 青色ボタン（他店に派遣）の流れ
1. **14:00-17:00 キッチンで余剰** → `他店に派遣`ボタンを押す
2. **公開確認モーダル**で「公開する」を押す
3. **自動で/inboxページに遷移** → 青色カード「応援する」に他店舗の募集が表示
4. **マッチングデータ**: 同じ時間・役割の他店舗募集が2件表示

## 🛠️ セットアップ

### 前提条件
- Node.js 18+
- npm 9+

### インストール
```bash
git clone https://github.com/shibuimika/shift-mash.git
cd shift-mash
npm install
```

### 開発サーバー起動
```bash
npm run dev
```
ブラウザで http://localhost:5173 にアクセス

### ビルド
```bash
npm run build
```

### プレビュー
```bash
npm run preview
```

## 📂 プロジェクト構造

```
src/
├── components/           # 共通コンポーネント
│   ├── ui/              # 基本UIコンポーネント
│   ├── Layout.tsx       # メインレイアウト
│   ├── ShiftCell.tsx    # シフトセル（メイン機能）
│   ├── RequestModal.tsx # リクエストモーダル
│   ├── RequestInboxList.tsx # 受信リスト
│   └── Toast.tsx        # 通知コンポーネント
├── pages/               # ページコンポーネント
│   ├── DayShiftPage.tsx # 当日シフト表
│   ├── InboxPage.tsx    # 受信リクエスト
│   └── OverviewPage.tsx # サマリー
├── hooks/               # カスタムフック
│   ├── useShifts.ts     # シフトデータ操作
│   ├── useRequests.ts   # リクエスト操作
│   └── useCandidates.ts # 候補検索
├── lib/                 # ユーティリティ
│   ├── api.ts           # 擬似API
│   ├── types.ts         # 型定義
│   ├── utils.ts         # ヘルパー関数
│   └── constants.ts     # 定数
└── public/mock/         # モックデータ
    ├── stores.json      # 店舗情報
    ├── workers.json     # 従業員情報
    ├── shifts.json      # シフト情報
    ├── publishings.json # 公開情報
    └── requests.json    # リクエスト情報
```

## 🔧 主要コンポーネント

### ShiftCell
シフト枠の表示と操作の中核コンポーネント
- 上部オーバーレイボタン（人員募集/他店舗に派遣）
- ステータス別カラーリング
- ワーカー情報の表示

### RequestModal
リクエスト送信用のモーダル
- 候補リストの表示・複数選択
- 0件時の自動公開メッセージ
- 距離・評価による候補並び替え

### useCandidates
候補検索のカスタムフック
- ロール・時間帯・距離によるフィルタリング
- 評価・経験値による優先順位付け
- リアルタイム候補更新

## 📊 データフロー

```
UI層 ← → React Query ← → 擬似API ← → ローカルJSON
      ↓
   ローカル状態（in-memory）
```

### 先着制御
- ローカルロック機構による競合制御
- 承認時の自動無効化処理
- 楽観的更新によるUX向上

## 🎨 デザインシステム

### カラーパレット
- **不足**: `red-500` / `red-100` 
- **余剰**: `blue-500` / `blue-100`
- **成立**: `green-500` / `green-100`

### タイポグラフィ
- フォント: Inter
- サイズ: Tailwind デフォルト

### レスポンシブ
- モバイルファースト設計
- ブレークポイント: 768px（md）

## 🧪 テスト用データ

### 店舗
- 北浦和店、与野店、浦和店（埼玉エリア）

### ワーカー
- 各店舗に2名ずつ配置
- ロール: ホール、キッチン
- 評価: 4.2〜4.8

### シナリオ
- 09:00-12:00 北浦和店ホール不足
- 14:00-17:00 与野店キッチン余剰
- リクエスト送信→承認のフロー確認可能

## 🚧 今後の拡張予定

- QR打刻機能
- プッシュ通知
- 評価バッジシステム
- 地図表示
- 給与連動機能
- エリアマネージャーダッシュボード

## 📄 ライセンス

MIT License

## 🤝 コントリビューション

1. Fork this repository
2. Create feature branch
3. Commit changes
4. Push to branch
5. Create Pull Request

---

**開発者**: Claude 4 Sonnet × Cursor
**開発期間**: 1日
**バージョン**: MVP v1.1

## 🌐 デプロイ

### Netlify
このプロジェクトはNetlifyでのデプロイに対応しています。

- **ビルドコマンド**: `npm run build`
- **公開ディレクトリ**: `dist`
- **リダイレクト**: SPA用のリダイレクト設定済み

### ライブデモ
[Netlifyでデプロイされたアプリケーション](https://shift-mash-demo.netlify.app)で実際の動作を確認できます。